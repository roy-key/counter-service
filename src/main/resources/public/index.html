<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css" />
    <script>
		var createCounter = function(){

			$.ajax({
 			 	url: 'counters',
  				type: 'POST',
  				success: function(data) {
                    handleResponse(data);
  				},
  				error: function(e) {
					$('#exceptions').val(e.responseJSON.responseObject.errorMessage);
  				}
			});

		}

		var addToCounter = function(){

			$.ajax({
 			 	url: 'counters/' + $('#CID').val() + '/add',
  				type: 'POST',
  				success: function(data) {
                    handleResponse(data);
  				},
  				error: function(e) {
					$('#exceptions').val(e.responseJSON.responseObject.errorMessage);
  				}
			});
		}

		var subtractFromCounter = function(){

			$.ajax({
 			 	url: 'counters/' + $('#CID').val() + '/subtract',
  				type: 'POST',
  				success: function(data) {
                    handleResponse(data);
  				},
  				error: function(e) {
					$('#exceptions').val(e.responseJSON.responseObject.errorMessage);
  				}
			});

		}

		var getCounterDetails = function(){

			$.ajax({
 			 	url: 'counters/' + $('#CID').val(),
  				type: 'GET',
  				success: function(data) {
                    handleResponse(data);
  				},
  				error: function(e) {
					$('#exceptions').val(e.responseJSON.responseObject.errorMessage);
  				}
			});
		}

    var getAllCounters = function(){

			$.ajax({
 			 	url: 'counters',
  				type: 'GET',
  				success: function(data) {
                    handleGetAllResponse(data);
  				},
  				error: function(e) {
					$('#exceptions').val(e.responseJSON.responseObject.errorMessage);
  				}
			});
    }

		var handleResponse = function(data){

            $('#CValue').val(data.responseObject.counterValue);
            $('#CID').val(data.responseObject.id);

		}

		var handleGetAllResponse = function(data){
            var arr = [];
            var responseArr = data.responseObject.counterResponseList;
            for (i = 0; i < responseArr.length; i++) {
                 arr.push(responseArr[i].id);
            }

            $('#AID').val(arr.join(", "));
        }

	</script>

    <title>Cunter Project</title>
</head>

<body>
<h1>Counter Project</h1>
<div class="outer clearfix">

    <div class="btnsContainer clearfix">
        <input id="create" class="btn" type="button" value="Create Counter" onclick="createCounter();" />
        <input id="add" class="btn" type="button" value="Add to counter" onclick="addToCounter();" />
        <input id="subtract" class="btn" type="button" value="Subtract from counter" onclick="subtractFromCounter();" />
        <input id="get" class="btn" type="button" value="Get Counter Details" onclick="getCounterDetails();" />
        <input id="getAllCounters" class="btn" type="button" value="Get All Counters" onclick="getAllCounters();" />
    </div>
    <div class="responseContainer">
          <h4>Counter Value</h4>
          <textarea id="CValue" rows="2" cols="35"></textarea>
          <h4>Counter ID</h4>
          <textarea id="CID" rows="2" cols="35"></textarea>
          <h4>All IDS</h4>
          <textarea id="AID" rows="10" cols="35"></textarea>
          <h4>Exceptions</h4>
          <textarea id="exceptions" rows="2" cols="35"></textarea>
     </div>

</div><!-- outer-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</body>
</html>